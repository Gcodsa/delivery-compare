<!doctype html>
<html lang="ar" dir="rtl">
      <header class="header">
    <img src="https://i.imgur.com/2uxXbdo.png" class="logo" alt="Ø´Ø¹Ø§Ø±">
  </header>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ù…Ù‚Ø§Ø±Ù† Ø£Ø³Ø¹Ø§Ø± Ø§Ù„ØªÙˆØµÙŠÙ„</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css">
  <style>
    
    body{background:#0b0f14;color:#f2f5f8;font-family:"Cairo",sans-serif}
    main{max-width:900px;margin-inline:auto;padding:2rem 1rem}
    .card{background:#121823;border:1px solid #1e2a3a;border-radius:16px;padding:1rem 1.2rem}
    .muted{color:#9fb0c3}
    button,input{direction:rtl}

          header.header {
      text-align: center;
      padding: 0 !important;
      margin: 0 !important;
       padding-top: clamp(0.5rem, 2vw, 1rem);    /* Ù…Ø³Ø§ÙØ© ÙÙˆÙ‚ Ø§Ù„Ù‡ÙŠØ¯Ø± */
       padding-bottom: clamp(0.5rem, 2vw, 1rem); /* Ù…Ø³Ø§ÙØ© ØªØ­Øª Ø§Ù„Ù‡ÙŠØ¯Ø± */
    }
        .logo {
      max-width: 200px; 
      transition: transform .3s;
    }
    .logo:hover { transform: scale(1.03); }

    .grid {
  display: grid;
  gap: 1rem;
  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
}
.meal {
  background: #121823;
  border: 1px solid #1e2a3a;
  border-radius: 12px;
  overflow: hidden;
  text-align: center;
}
.meal img {
  width: 100%;
  height: 180px;
  object-fit: cover;
  background: #0e1522;
}
.meal .info {
  padding: 0.8rem;
}
.meal .name {
  font-weight: 700;
  font-size: 1.05rem;
}
.meal .price {
  color: #9fb0c3;
  margin-bottom: 0.6rem;
}
.meal button {
  width: 100%;
  background: #2b7fff;
  border: none;
  border-radius: 8px;
  color: #fff;
  padding: 0.5rem;
  cursor: pointer;
}
.meal button:hover {
  background: #0b5ed7;
}

/* âœ… ÙŠØ­Ø§ÙØ¸ Ø¹Ù„Ù‰ Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø¯Ø§Ø®Ù„ Ø§Ù„Ø¥Ø·Ø§Ø± Ø¨Ø¯ÙˆÙ† Ø®Ø±ÙˆØ¬ */
.table-wrapper {
  width: 100%;
  overflow-x: hidden;     /* ÙŠÙ…Ù†Ø¹ Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø§Ù„Ø£ÙÙ‚ÙŠ */
  overflow-y: visible;
  margin-top: 1rem;
  border-radius: 12px;
}

.price-table {
  width: 100%;
  border-collapse: collapse;
  background: #121823;
  border: 1px solid #1e2a3a;
  border-radius: 12px;
  margin: 0 auto;          /* ÙŠØ¨Ù‚ÙŠÙ‡ Ø¨Ø§Ù„Ù…Ù†ØªØµÙ */
  table-layout: fixed;     /* ğŸ”’ ÙŠØ¬Ø¹Ù„ Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© ØªØªÙ‚Ù„Øµ Ø¨Ø¯ÙˆÙ† Ø®Ø±ÙˆØ¬ */
  word-break: break-word;  /* ÙŠÙ…Ù†Ø¹ Ø§Ù„Ù†Øµ Ù…Ù† ØªØ¬Ø§ÙˆØ² Ø§Ù„Ø®Ù„ÙŠØ© */
}

.price-table th,
.price-table td {
  padding: 12px 10px;
  text-align: center;
  border-bottom: 1px solid #1e2a3a;
  vertical-align: middle;
  white-space: normal;
  overflow-wrap: break-word;
}

.price-table th {
  background: #10151e;
  font-weight: 600;
  color: #f2f5f8;
}

.price-table tr:hover {
  background: #0e1420;
}



</style>
<style>
/* Ù…Ù†Ø¹ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù†Øµ */
body {
  -webkit-user-select: none; /* Chrome Ùˆ Safari */
  -moz-user-select: none;    /* Firefox */
  -ms-user-select: none;     /* Internet Explorer / Edge */
  user-select: none;
}
</style>

<script>
// ğŸš« Ù…Ù†Ø¹ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ø®ØªØµØ§Ø±Ø§Øª Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­ (Ctrl+C, Ctrl+V, Ctrl+U ...)
document.addEventListener('keydown', function(e) {
  if (e.ctrlKey || e.metaKey) {
    e.preventDefault();
  }
});

// ğŸš« Ù…Ù†Ø¹ Ø§Ù„Ù†Ù‚Ø± Ø¨Ø²Ø± Ø§Ù„Ù…Ø§ÙˆØ³ Ø§Ù„Ø£ÙŠÙ…Ù†
document.addEventListener('contextmenu', function(e) {
  e.preventDefault();
});

// ğŸš« Ù…Ù†Ø¹ Ø³Ø­Ø¨ Ø§Ù„ØµÙˆØ± (Ø¥Ù† ÙˆÙØ¬Ø¯Øª)
document.addEventListener('dragstart', function(e) {
  e.preventDefault();
});

// ğŸš« Ù…Ù†Ø¹ Ø§Ù„Ù†Ù‚Ø± Ø§Ù„Ù…Ø²Ø¯ÙˆØ¬ (Ù„ØªÙØ§Ø¯ÙŠ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù†Øµ)
document.addEventListener('dblclick', function(e) {
  e.preventDefault();
}, { passive: false });
</script>

  </style>
</head>
<body>
  <main>

  <!-- âœ… Ù…Ø±Ø¨Ø¹ Ø§Ù„Ø¨Ø­Ø« -->
  <form method="post" class="card">
    <input type="text" name="restaurant" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ù…Ø·Ø¹Ù…..." required autocomplete="off" />

    <button type="submit">ğŸ” Ø§Ø¨Ø­Ø«</button>
  </form>

  <!-- âœ… Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙˆØ¬Ø¨Ø§Øª -->
  {% if menu and menu|length > 0 %}
  <div class="card" style="margin-top:1rem;">
    <h3>Ù‚Ø§Ø¦Ù…Ø© ÙˆØ¬Ø¨Ø§Øª {{ query.restaurant }}</h3>
    <div class="grid">
      {% for m in menu %}
      <div class="meal">
        {% if m.image %}
          <img src="{{ m.image }}" alt="{{ m.name }}">
        {% else %}
          <img src="https://dummyimage.com/600x400/0e1522/ffffff&text=No+Image" alt="">
        {% endif %}
        <div class="info">
          <div class="name">{{ m.name }}</div>
          <div class="price">{{ '%.2f'|format(m.price) if m.price is not none else '-' }} Ø±.Ø³</div>
          <form method="post">
            <input type="hidden" name="restaurant" value="{{ query.restaurant }}">
            <input type="hidden" name="meal_name" value="{{ m.name }}">
            <button type="submit" name="compare" value="1" class="btn">Ù‚Ø§Ø±Ù† Ø§Ù„Ø³Ø¹Ø± ğŸ”</button>
          </form>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
  {% endif %}

  <!-- âœ… Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…Ù‚Ø§Ø±Ù†Ø© -->
  {% if results %}
  <div class="card" style="margin-top:1.5rem;">
    <h3>Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ù…Ù‚Ø§Ø±Ù†Ø© Ù„ÙˆØ¬Ø¨Ø©: {{ meal_name }}</h3>
    <table class="price-table">
      <thead>
        <tr>
          <th>Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</th>
          <th>Ø³Ø¹Ø± Ø§Ù„ÙˆØ¬Ø¨Ø©</th>
          <th>Ø§Ù„ØªÙˆØµÙŠÙ„</th>
          <th>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</th>
        </tr>
      </thead>
      <tbody>
        {% set best_total = results[0].total if results and results[0].total is not none else none %}
        {% for r in results %}
        <tr {% if best_total and r.total == best_total %}class="best"{% endif %}>
          <td>{{ r.app }}</td>
          <td>{{ '%.2f'|format(r.item_price) if r.item_price is not none else '-' }}</td>
          <td>{% if r.delivery_free %}Ù…Ø¬Ø§Ù†ÙŠ{% else %}{{ '%.2f'|format(r.delivery_fee) if r.delivery_fee is not none else '-' }}{% endif %}</td>
          <td><strong>{{ '%.2f'|format(r.total) if r.total is not none else '-' }}</strong></td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% endif %}
</main>
